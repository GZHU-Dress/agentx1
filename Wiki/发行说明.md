# 简介 #

## 文件规格 ##

各版本的二进制集合文件包均可于[下载区](http://bitbucket.org/CrazyBoyFeng/agentx1/downloads)得到，其中包含了按芯片指令集分类的 Linux 发布。

每个发布均包含以对应编译工具链优化过的 Linux 可执行链接格式文件，应该根据设备的具体情况安装使用。

完整的架设、部署、使用及操作的流程，参阅 UserSupport

## 环境要求 ##

由于采用了混杂模式和原始套接字，因此命令必须具有 Root 级别的执行权限。

为了保证高兼容性及可移植性，仅使用了系统的常量、函数和库，除了内核没有任何依赖关系。

# 命令参数 #

安装部署完毕后使用以下参数配置工作选项并启动：
```
#!shell
用法 agentx1 [-h] 显示使用帮助信息
	[-L <接口名称>] 设置局域网络接口名称(默认 br-lan)
	[-W <接口名称>] 设置广域网络接口名称(默认 br-wan)
	[-p NONUSE(默认关闭)|LOCAL(本地)|BOTH(双向)] 设置使用混杂模式的范围
	[-a NONE(默认手动)|FORMER(认证前)|LATER(认证后)|MIDDLE(两次)] 设置获得网络地址的方式
	[-u <账户>] 设置认证绑定的计费账户(默认随客户端)
	[-i <地址>] 设置静态绑定的网络地址(默认 WAN)
	[-n <地址>] 设置静态绑定的子网掩码(默认 WAN)
	[-g <地址>] 设置绑定的广域网关(默认 0.0.0.0)
	[-d <地址>] 设置绑定的域名解析(默认 0.0.0.0)
例如 agentx1 -L br-lan -W br-wan -p NONUSE -a NONE -u account -i 10.10.10.10 -n 255.255.255.0 -g 10.10.10.1 -d 1.1.1.1
```
个别选项或参数的具体用法和注意事项下方逐一说明。

## 详情 ##

使用 `-h` 调出帮助或输入错误时，软件将会中断代理工作并结束进程。

使用 `-L` 及 `-W` 设置网络时，最好选择对应的逻辑而非物理接口名称。

使用 `-p` 设置使用的混杂模式的范围，有三种选择：
* `NONUSE`	在所有的网络接口上都不使用混杂模式，默认推荐。
* `LOCAL`	在本地网络接口上使用混杂模式，“连接服务器失败”请尝试。
* `BOTH`	在局域以及广域网络接口上使用混杂模式，“寻找服务器失败”请尝试。

使用 `-a` 设置获得网络地址的方式，有四种选择：
* `NONE`	使用静态绑定的网络地址。
* `FORMER`	在认证之前获得网络地址。
* `LATER`	在认证之后获得网络地址。
* `MIDDLE`	两次认证间获得网络地址。

使用 `-i` 和 `-n` 时，若未设置或输入无效地址，将会读取网络接口，动态地址无需设置。

使用 `-g` 和 `-d` 时，并不读取网络接口的参数，静态绑定必须设置，动态地址推荐设置。